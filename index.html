<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>빈칸 문제 만들기</title>
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
	<link rel="stylesheet" href="http://cdn.rawgit.com/necolas/normalize.css/master/normalize.css">
	<link rel="stylesheet" href="http://cdn.rawgit.com/milligram/milligram/master/dist/milligram.min.css">
	<style>
	.main {
		max-width: 75%;
		margin: 50px auto;
	}
	.output-section {
		display: none;
	}
	.output {
		margin-bottom: 1.5rem;
		overflow-wrap: break-word;
		word-wrap: break-word;
		overflow: auto;
	}
	@media print {
		#noprint { display:none; }
		.main { max-width: 100%; }
	}
	.remember {
		font-size: 2rem;
		position: fixed;
		color: #ffd43b;
		top: 0;
		right: 0;
	}
	</style>
</head>
<body>
<div class="main">
	<div class="controll">
		<h3>빈칸 문제 만들기</h3>
		<label for="getting">INPUT</label>
		<textarea placeholder="이곳에 내용을 넣습니다." id="getting" required></textarea>
		<button onclick="getString()">다음단계로</button>
	</div>

	<div class="output-section">
	<h3 id="noprint">클릭해서 빈칸 만들기</h3>
		<div class="output">
			not loaded yet
			<!-- output string -->
		</div>
		<div id="noprint"><button onclick="printPage()">인쇄하기</button> <button onclick="getString()">다시만들기</button> <a class="button button-outline" href="">처음부터</a></div>
	</div>
	<span class="remember">&#127895;</span>
</div>

<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
<script type="text/javascript">
function getString() {
	$( ".controll" ).hide();
	$( ".output-section" ).show();
	var orginalString = $("#getting").val();//input 받아 변수로 저장
	var textrepeat = orginalString.split(" ");// orginalString 스플릿
	$( ".output" ).empty();//output을 미리청소
	$( ".orginal" ).text(orginalString);//오리지널칸에 orginalString 출력
	var	indexing = 1;
	for (var i in textrepeat) {
		$( ".output" ).append( "<span id=splt class=spltext"+ indexing++ +" onclick=rePlaced(this.className)>" + textrepeat[i] +"&nbsp;</span>" );
	}
}

function insertSpace(t, l) {
	var spaceString = new String;
	for(i=0;i<l;i++){
	spaceString += t;
	}
	return spaceString;
}

function rePlaced(className) {
	var txtlength = $( "."+className ).text().length;
	$( "."+className ).html("&nbsp;("+insertSpace("&nbsp;&nbsp;&nbsp;",txtlength)+")&nbsp;");
	$( "span" ).removeClass( className );
}

function printPage() {
	window.print();
}
</script>
</body>
</html>
